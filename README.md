# Система управления арендуемой недвижимостью

Это приложение на Python управляет арендуемой недвижимостью, отслеживает информацию о клиентах и обрабатывает платежи, используя базу данных SQLite и графический интерфейс PyQt6.

Система управления арендуемой недвижимостью предназначена для упрощения процесса управления арендуемой недвижимостью для арендодателей или управляющих недвижимостью. Она предоставляет удобный интерфейс для отслеживания информации о клиентах, дат аренды, балансов и истории платежей. Система также включает функции для генерации платежей, обновления балансов клиентов и отправки напоминаний о показаниях счетчиков и расчетах.

## Ключевые особенности

- База данных SQLite для эффективного хранения и управления информацией о клиентах
- Автоматическое формирование платежей и обновление баланса
  - Система автоматически генерирует платежи каждые 30 дней
  - Балансы клиентов обновляются на основе новых платежей и начислений
- Комплексная система напоминаний
  - Отправляет уведомления о предстоящих показаниях счетчика
  - Оповещения о предстоящих и просроченных выездах
- Интерактивная карта для визуализации местоположения объектов недвижимости с использованием библиотеки Folium
- Удобный графический интерфейс, созданный на основе PyQt6, с возможностью просмотра:
  - Главное окно с приветственным сообщением и списком событий
  - Редактор информации о клиентах
  - Интерактивный просмотр карт
  - Управление настройками
  - Быстрый доступ для добавления показаний счетчиков и платежей
- Настраиваемые настройки для управления недвижимостью
- Автоматическое исправление ошибок и проверка целостности данных
- Многооконный интерфейс для эффективного управления рабочими процессами

## Структура хранилища

Хранилище содержит следующие основные файлы:

- `main.py`: Точка входа в приложение, содержащая основной графический интерфейс пользователя и логику управления базой данных.
- `compliments.py`: Модуль, который генерирует случайные комплименты для приветственного сообщения.
- `maps.py`: Модуль для создания интерактивных карт с использованием библиотеки Folium.
- `map1.html`: HTML-файл, созданный модулем maps для отображения интерактивной карты.

## Инструкции по использованию

### Установка

1. Убедитесь, что в вашей системе установлен Python версии 3.7 или выше.

2. Установите необходимые зависимости:

```bash
pip install PyQt6 PyQtWebEngine folium docxtpl
```

3. Скопируйте репозиторий или загрузите исходные файлы.

### Начало работы

1. Запустите приложение, выполнив `main.py` файл:

```bash
python main.py
```

2. Откроется главное окно с приветственным сообщением, списком событий и кнопками для различных функций.

### Настройка

Приложение использует базу данных SQLite для хранения информации о клиенте. Путь к файлу базы данных хранится в файле `db.txt`. Если файл не существует, приложение создаст новый файл базы данных с именем `test_new.db3` в том же каталоге.

### Общие варианты использования

1. Редактирование информации о клиенте:
   - Нажмите кнопку "Редактировать", чтобы открыть редактор информации о клиенте.
   - Добавляйте, изменяйте или удаляйте данные клиента по мере необходимости.
   - Изменения немедленно сохраняются в базе данных.

2. Просмотр местоположения объектов недвижимости:
   - Нажмите кнопку "Карта", чтобы открыть интерактивную карту с указанием местоположения объектов недвижимости.
   - Карта создается с использованием библиотеки Folium и отображает маркеры для каждого объекта недвижимости.

3. Генерирование платежей:
   - Система автоматически генерирует платежи каждые 30 дней.
   - Вы также можете добавлять платежи вручную, используя кнопку "Быстрая оплата".
   - Платежи рассчитываются на основе ежемесячной арендной платы и любых дополнительных платежей по показаниям счетчика.

4. Добавление показаний счетчика:
   - Используйте кнопку "Fast MSU", чтобы быстро добавить новые показания счетчика для объекта недвижимости.
   - Система включит эти показания в расчет следующего платежа.

5. Управление напоминаниями:
   - Система автоматически генерирует напоминания для:
     - Предстоящие проверки (за 3 дня, 2 дня, 1 день и в день проверки)
     - Необходимые показания счетчика (за 5 дней до следующего платежа)
     - Просроченные проверки
   - Эти напоминания отображаются в списке событий в главном окне.

6. Мониторинг остатков средств клиентов:
   - Система автоматически обновляет баланс клиента после каждого произведенного платежа.
   - Для клиентов с отрицательным балансом создаются оповещения.

7. Доступ к настройкам:
   - Нажмите кнопку "Настройки", чтобы открыть окно управления настройками.
   - При необходимости настройте различные аспекты системы управления недвижимостью.

### Устранение неполадок

1. Проблемы с подключением к базе данных:
   - Убедитесь, что в файле "db.txt` указан правильный путь к файлу вашей базы данных.
   - Если файл базы данных отсутствует, приложение создаст новый с именем "test_new.db3".

2. Графический интерфейс отображается неправильно:
   - Убедитесь, что у вас установлена последняя версия PyQt6.
   - Убедитесь, что файл "main.ui" находится в том же каталоге, что и "main.py`.

3. Карта не загружается:
   - Убедитесь, что у вас есть активное подключение к Интернету, так как для работы с картой требуются онлайн-ресурсы.
   - Убедитесь, что библиотека Folium установлена правильно.

## Поток данных

Система управления арендуемой недвижимостью обрабатывает данные в следующей последовательности:

1. Запуск приложения:
   - Система инициализирует подключение к базе данных.
   - Загружает существующие данные о клиентах и недвижимости из базы данных SQLite.

2. Обработка данных:
   - Приложение проверяет наличие причитающихся платежей и автоматически генерирует новые.
   - Оно обновляет баланс клиента на основе новых платежей и начислений.
   - Система генерирует напоминания о предстоящих проверках и необходимых показаниях счетчика.

3. Взаимодействие с пользователем:
   - Пользователи могут просматривать и редактировать информацию о клиенте через графический интерфейс.
   - Они могут добавлять новые показания счетчиков или вносить платежи вручную.
   - Местоположение объекта недвижимости можно просматривать на интерактивной карте.

4. Сохранение данных:
   - Все изменения, внесенные с помощью графического интерфейса пользователя, немедленно сохраняются в базе данных SQLite.
   - Приложение регулярно обновляет базу данных новыми платежами и информацией о балансе.

```
[Запуск приложения] -> [Загрузка базы данных] -> [Обработка причитающихся платежей]
        |                                          |
        v                                          v
[Обновление балансов клиентов] <--> [Взаимодействие с пользователем] <--> [Создание напоминаний]
        |                                          |
        |                                          v
        |                           [Просмотр/Редактирование информации о клиенте]
        |                           [Добавление показаний счетчика]
        |                           [Добавление платежей вручную]
        |                           [Посмотреть карту недвижимости]
        |                                          |
        v                                          v
[Сохранить изменения в базе данных] <-- [Закрыть приложение]
```

Примечание: Система поддерживает целостность данных, немедленно сохраняя изменения в базе данных, гарантируя, что никакая информация не будет потеряна в случае неожиданного отключения.