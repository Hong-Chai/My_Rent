# Rental Property Management System

This Python application manages rental properties, tracks client information, and handles payments using a SQLite database and PyQt6 GUI.

The Rental Property Management System is designed to streamline the process of managing rental properties for landlords or property managers. It provides a user-friendly interface for tracking client information, rental dates, balances, and payment history. The system also includes features for generating payments, updating client balances, and sending reminders for meter readings and check-outs.

## Key features

- SQLite database for efficient storage and management of client information
- Automated payment generation and balance updates
  - The system automatically generates payments every 30 days
  - Client balances are updated based on new payments and charges
- Comprehensive reminder system
  - Sends notifications for upcoming meter readings
  - Alerts for imminent and overdue check-outs
- Interactive map for visualizing property locations using Folium library
- User-friendly GUI built with PyQt6, featuring:
  - Main window with welcome message and event list
  - Client information editor
  - Interactive map viewer
  - Settings management
  - Quick access for adding meter readings and payments
- Customizable settings for property management
- Automated error correction and data integrity checks
- Multi-window interface for efficient workflow management

## Repository Structure

The repository contains the following main files:

- `main.py`: The entry point of the application, containing the main GUI and database management logic.
- `compliments.py`: A module that generates random compliments for the welcome message.
- `maps.py`: A module for creating interactive maps using the Folium library.
- `map1.html`: An HTML file generated by the maps module to display the interactive map.

## Usage Instructions

### Installation

1. Ensure you have Python 3.7 or higher installed on your system.

2. Install the required dependencies:

```bash
pip install PyQt6 PyQtWebEngine folium docxtpl
```

3. Clone the repository or download the source files.

### Getting Started

1. Run the application by executing the `main.py` file:

```bash
python main.py
```

2. The main window will open, displaying a welcome message, a list of events, and buttons for various functions.

### Configuration

The application uses a SQLite database to store client information. The database file path is stored in a `db.txt` file. If the file doesn't exist, the application will create a new database file named `test_new.db3` in the same directory.

### Common Use Cases

1. Editing Client Information:
   - Click the "Edit" button to open the client information editor.
   - Add, modify, or remove client details as needed.
   - Changes are immediately saved to the database.

2. Viewing Property Locations:
   - Click the "Map" button to open an interactive map showing property locations.
   - The map is generated using the Folium library and displays markers for each property.

3. Generating Payments:
   - The system automatically generates payments every 30 days.
   - You can also manually add payments using the "Fast Pay" button.
   - Payments are calculated based on the monthly rent and any additional charges from meter readings.

4. Adding Meter Readings:
   - Use the "Fast MSU" button to quickly add new meter readings for a property.
   - The system will incorporate these readings into the next payment calculation.

5. Managing Reminders:
   - The system automatically generates reminders for:
     - Upcoming check-outs (3 days, 2 days, 1 day, and on the day of check-out)
     - Required meter readings (5 days before the next payment is due)
     - Overdue check-outs
   - These reminders appear in the event list on the main window.

6. Monitoring Client Balances:
   - The system automatically updates client balances after each payment generation.
   - Alerts are created for clients with negative balances.

7. Accessing Settings:
   - Click the "Settings" button to open the settings management window.
   - Customize various aspects of the property management system as needed.

### Troubleshooting

1. Database Connection Issues:
   - Ensure the `db.txt` file contains the correct path to your database file.
   - If the database file is missing, the application will create a new one named `test_new.db3`.

2. GUI Not Displaying Correctly:
   - Make sure you have the latest version of PyQt6 installed.
   - Check that the `main.ui` file is in the same directory as `main.py`.

3. Map Not Loading:
   - Verify that you have an active internet connection, as the map requires online resources.
   - Ensure the Folium library is correctly installed.

## Data Flow

The Rental Property Management System processes data in the following sequence:

1. Application Startup:
   - The system initializes the database connection.
   - It loads existing client and property data from the SQLite database.

2. Data Processing:
   - The application checks for due payments and generates new ones automatically.
   - It updates client balances based on new payments and charges.
   - The system generates reminders for upcoming check-outs and required meter readings.

3. User Interaction:
   - Users can view and edit client information through the GUI.
   - They can add new meter readings or manual payments.
   - Property locations can be viewed on an interactive map.

4. Data Persistence:
   - All changes made through the GUI are immediately saved to the SQLite database.
   - The application regularly updates the database with new payments and balance information.

```
[Application Start] -> [Load Database] -> [Process Due Payments]
        |                                          |
        v                                          v
[Update Client Balances] <--> [User Interaction] <--> [Generate Reminders]
        |                            |
        |                            v
        |                  [View/Edit Client Info]
        |                  [Add Meter Readings]
        |                  [Add Manual Payments]
        |                  [View Property Map]
        |                            |
        v                            v
[Save Changes to Database] <-- [Close Application]
```

Note: The system maintains data integrity by immediately persisting changes to the database, ensuring that no information is lost in case of unexpected shutdowns.